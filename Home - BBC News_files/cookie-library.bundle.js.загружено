/*! For license information please see cookie-library.bundle.js.LICENSE.txt */
!function(){"use strict";var e={ads:[{pattern:"ckad_.+",description:'Generic ckad_ prefix for self-classified "ads" cookies.',usage:"Usage will be unclear since it's self-classified by development teams."},{pattern:"rsi_segs",description:"?",usage:"Usage found in GNL's bbcdotcom module."},{pattern:"c",description:"?",usage:"?"}],necessary:[{pattern:"optimizelyEndUserId",description:"Set by Optimizely web experiments",usage:"Anywhere the Optimizely web experiments SDK is used."},{pattern:"ckns_.+",description:'Generic ckns_ prefix for self-classified "necessary" cookies.',usage:"Usage will be unclear since it's self-classified by development teams."},{pattern:"idrxvr",description:"Part of the Piano (ATI) unique visitor tracking.",usage:"Cookie is read in Echo's ATI delegate"},{pattern:"atidvisitor",description:"Part of the Piano (ATI) unique visitor tracking.",usage:"Set by Piano SDK as used in Reverb and Echo"},{pattern:"atuserid",description:"Part of the Piano (ATI) unique visitor tracking.",usage:"Set by Piano SDK as used in Reverb and Echo"},{pattern:"(_cb_.+|_chartbeat\\d)",description:"Used by Chartbeat 3rd party for tracking views, scrolling, engagement etc. in real time.",usage:"Historically mainly used on News and Sport, some Children's. See https://confluence.dev.bbc.co.uk/display/chartbeat/Chartbeat+run+book"},{pattern:"SSO2-UID",description:"?",usage:"?"},{pattern:"bbcComSurvey",description:"?",usage:"?"},{pattern:"IDENTITY_ENV",description:"?",usage:"?"},{pattern:"IDENTITY",description:"?",usage:"?"},{pattern:"IDENTITY-HTTPS",description:"?",usage:"?"},{pattern:"IDENTITY_SESSION",description:"?",usage:"?"},{pattern:"BBCCOMMENTSMODULESESSID",description:"?",usage:"?"},{pattern:"bbcBump.+",description:"?",usage:"?"},{pattern:"ecos\\.dt",description:"?",usage:"?"},{pattern:"_sm_au_[c|d]",description:"?",usage:"?"},{pattern:"AMAuthCookie",description:"Temporary cookie used as part of sign-in flow",usage:"Used in bbc/id-account Github repo."},{pattern:"AM_REDIRECT_BACK_SERVER_URL",description:"Temporary cookie used as part of sign-in flow",usage:"Used in bbc/id-account Github repo."},{pattern:"AWSELB",description:"Creates sticky sessions in AWS: https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/elb-sticky-sessions.html",usage:"Seems to be used in Account as part of sign-in. Could be used elsewhere in theory."},{pattern:"(devN|uatN|n)ightfall(Session|Refresh)Token",description:"?",usage:"?"},{pattern:"amlbcookie",description:"See https://backstage.forgerock.com/knowledge/kb/article/a19829000#amlbcookie",usage:"Used by Account sign-in flow since it uses OpenAM. Many products also seem to have references to it in their sign-in flows."},{pattern:"i00",description:"?",usage:"?"},{pattern:"FCCDCF",description:"CMP provider - GDPR compliance in EEA",usage:"?"},{pattern:"_sp_enable_dfp_personalized_ads",description:"Sourcepoint (CMP provider): ensure GDPR compliance in EEA and CCPA in California",usage:"?"},{pattern:"consentUUID",description:"Sourcepoint (CMP provider): ensure GDPR compliance in EEA and CCPA in California",usage:"?"},{pattern:"euconsent-v2",description:"Sourcepoint (CMP provider): ensure GDPR compliance in EEA and CCPA in California",usage:"?"},{pattern:"ccpaUUID",description:"Sourcepoint (CMP provider): ensure GDPR compliance in EEA and CCPA in California",usage:"?"},{pattern:"dnsDisplayed",description:"Sourcepoint (CMP provider): ensure GDPR compliance in EEA and CCPA in California",usage:"?"},{pattern:"ccpaApplies",description:"Sourcepoint (CMP provider): ensure GDPR compliance in EEA and CCPA in California",usage:"?"},{pattern:"signedLspa",description:"Sourcepoint (CMP provider): ensure GDPR compliance in EEA and CCPA in California",usage:"?"},{pattern:"_sp_su",description:"Sourcepoint (CMP provider): ensure GDPR compliance in EEA and CCPA in California",usage:"?"},{pattern:"consentDate",description:"Sourcepoint (CMP provider): ensure GDPR compliance in EEA and CCPA in California",usage:"?"}],performance:[{pattern:"ckpf_.+",description:'Generic ckpf_ prefix for self-classified "performance" cookies.',usage:"Usage will be unclear since it's self-classified by development teams."},{pattern:"optimizely.*",description:"?",usage:"?"},{pattern:"id",description:"?",usage:"?"},{pattern:"_em_.+",description:"?",usage:"?"},{pattern:"(cookies_enabled|mbox|mbox-admin|mc_.+|omniture_unique|s_.+|sc_.+|tr_pr1)",description:"Omniture Site Catalyst analytics for international visitors",usage:"?"},{pattern:"adpolicyAdDisplayFrequency",description:"Throttles how often users see pre-roll ads in EMP player on GNL sites",usage:"Used in an adPolicyplaylistSelector.js file in a few GNL repos including Storyworks"},{pattern:"gvsurvey",description:"?",usage:"?"},{pattern:"bbcsurvey",description:"?",usage:"?"},{pattern:"si_v",description:"?",usage:"?"},{pattern:"obuid",description:"?",usage:"?"},{pattern:"mm_.+",description:"?",usage:"?"},{pattern:"mmid",description:"?",usage:"?"},{pattern:"mmcore.+",description:"?",usage:"?"},{pattern:"mmpa.+",description:"?",usage:"?"},{pattern:"(dtCookie|dtPC|rxVisitor|rxvt|dtSa|dtLatC)",description:"Cookies used by Dynatrace: https://www.dynatrace.com/support/help/how-to-use-dynatrace/data-privacy-and-security/data-privacy/cookies",usage:"?"},{pattern:"__gads",description:".com ads enabled only",usage:"?"},{pattern:"(__pc_.*|__tpcc_.*|xbc|__tbc|__pls|__tac|__tae|_pctx|_pprv|_pcid)",description:"Piano, .com ads enabled only, registration messaging",usage:"?"}],personalisation:[{pattern:"ckps_.+",description:'Generic ckps_ prefix for self-classified "personalsiation" (aka functional) cookies.',usage:"Usage will be unclear since it's self-classified by development teams."},{pattern:"locserv",description:"?",usage:"?"},{pattern:"blaize_.+",description:"Zephr personalised sign/registration message based on customer page view, .com only, ads enabled product only",usage:"?"},{pattern:"__adblocker",description:".com only, ads enabled product only, allow to track users that have adblocker, not in constant use",usage:"?"},{pattern:"xbc",description:".com only, ads enabled product only",usage:"?"},{pattern:"__tbc",description:".com only, ads enabled product only",usage:"?"}]},t={},n="https:"===document.location.protocol;t.IMPLICIT_FLAG="0",t.EXPLICIT_FLAG="1",t.EXPLICIT_FLAG_EU="2",t.POLICY_REFRESH_DATE_MILLIS=new Date(2015,4,21,0,0,0,0).getTime(),t.PRIVACY_COOKIE_NAME="ckns_privacy",t.EXPLICIT_COOKIE_NAME="ckns_explicit",t.POLICY_COOKIE_NAME="ckns_policy",t.CURRENT_PRIVACY_POLICY="july2019";for(var o={"www.int.bbc.co.uk":"https://www.test.bbc.co.uk/cookieoven","www.int.bbc.com":"https://www.int.bbc.com/cookieoven","www.test.bbc.co.uk":"https://www.test.bbc.co.uk/cookieoven","www.test.bbc.com":"https://www.test.bbc.com/cookieoven","navigation.int.api.bbc.co.uk":"https://www.test.bbc.co.uk/cookieoven","navigation.test.api.bbc.co.uk":"https://www.test.bbc.co.uk/cookieoven","navigation.int.api.bbc.com":"https://www.test.bbc.com/cookieoven","navigation.test.api.bbc.com":"https://www.test.bbc.com/cookieoven","cookies.test.api.bbc.co.uk":"https://www.test.bbc.co.uk/cookieoven"},i=["AT","AX","BE","BG","BL","CY","CZ","DE","DK","EE","ES","EU","FI","FR","GB","GF","GG","GI","GP","GR","HR","HU","IE","IM","IS","IT","JE","LI","LT","LU","LV","MF","MT","MQ","NL","NO","PL","PM","PT","RE","RO","SE","SI","SK","YT"],a={ads:!1,personalisation:!1,performance:!1,necessary:!0},r={},c={},s=0,p=Object.keys(e);s<p.length;s++){var d=p[s],u=e[d].map((function(e){return e.pattern}));c[d]=u.join("|")}function l(e,t){t&&t(new Error(e))}t.isEU=function(e){return!!e&&-1!==i.indexOf(e.toUpperCase())},t.cookieOvenRequest=function(e,t,n){try{e.open("GET",t,!0),e.send()}catch(e){n&&n(e)}},t.cookieOvenClient=function(e,n,o,i){if("withCredentials"in new XMLHttpRequest){var a=[t.POLICY_COOKIE_NAME,t.EXPLICIT_COOKIE_NAME];try{if(!o)throw new Error("Cannot make request to cross domain cookie service when domain is not set.");if(a.indexOf(e)<=-1)throw new Error("Cookie name is not in the whitelist accepted by the cross domain cookie service.");var r={com:"co.uk","co.uk":"com"}[o.match(/(co.uk|com)/)[0]],c=function(e){var t=new XMLHttpRequest;return t.withCredentials=!0,t.onload=function(){e&&e(null,t.status)},t.onerror=function(n){l("Request to cross domain cookie service encountered an error with code"+t.status+". "+n,e)},t.onabort=function(){l("Request to cross domain cookie service was aborted.",e)},t.ontimeout=function(){l("Request to cross domain cookie service timed out.",e)},t}(i),s=function(e,t,n){return window.orbitData.partialCookieOvenUrl+"."+e+"/"+t+"/"+n}(r,e,n);t.cookieOvenRequest(c,s,i)}catch(e){i&&i(e)}}else i(new Error("Cannot make request to cross domain cookie service as this browser does not support XmlHttpRequest with credentials."))},t.set=function(e,n,o,i){var a,r;if(void 0!==n){r=E(a=h(e),n,o);var c=o&&o.crossDomainEnabled;t.isAllowed(a)&&c&&t.cookieOvenClient(e,n,o.domain,i)}else a=function(e){var t=(""+e).match(/^([^=]+)(?==)/);return t&&t.length?t[0]:""}(e),r=e;t.isAllowed(a)&&(document.cookie=r)},t.setPolicy=function(e){var n,i,a="?policy="+(e.ads?1:0)+(e.personalisation?1:0)+(e.performance?1:0),r=(n=window.location.host,o[n]||"https://www.".concat(t._getCurrentDomain(),"/cookieoven"));return fetch("".concat(r).concat(a),{credentials:"include"}),i="bbc.co.uk"===t._getCurrentDomain().match(/(bbc.co.uk|bbc.com)/)[0]?r.replace(".bbc.co.uk",".bbc.com"):r.replace(".bbc.com",".bbc.co.uk"),fetch("".concat(i).concat(a),{credentials:"include"})},t.isAllowed=function(e){return!(e&&e.match&&e.match(/^ckns_cookietest[0-9]*/))&&function(e){var t=JSON.stringify(e);if(void 0!==r[t])return r[t];var n="";for(var o in e)e.hasOwnProperty(o)&&c[o]&&!0===e[o]&&(n+=(n?"|":"")+c[o]);return r[t]=new RegExp("^("+(n||".*")+")$","i"),r[t]}(t.readPolicy()).test(e)},t.readPolicy=function(e){var t=w();return e?t[e]:t},t.analyticsPolicyString=function(){var e=w();return"ad"+ +e.ads+"ps"+ +e.personalisation+"pf"+ +e.performance},t.get=function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:document.cookie},t.isCookiePolicySet=function(){return null!==t.get(t.POLICY_COOKIE_NAME)},t.setImplicitPolicy=function(e){"gb"===e||"eu"===e?v({ads:!1,personalisation:!1,performance:!1,necessary:!0},!1):"row"===e&&v({ads:!0,personalisation:!0,performance:!0,necessary:!0},!1)};var m=null;function f(e,t){if(void 0===e)return null;var n={};n.expires=new Date(0),t&&(n.domain=t.domain,n.path=t.path),document.cookie=E(e,"removed",n)}function b(e){var t=window.location.hostname.split(".");for(t.length,f(e),g(e);t.length&&-1==="|co.uk|com|".indexOf("|"+t.join(".")+"|");){if(t.length){var n=t.join(".");f(e,{domain:n}),g(e,n)}t.shift()}}function g(e,t){var n=window.location.pathname.split("/");for(f(e,t);n.length;){var o=n.join("/");""===o&&(o="/"),f(e,{domain:t,path:o}),t&&f(e,{domain:"."+t,path:o}),n.pop()}}function w(){var e=new RegExp("(?:^|; ?)"+t.POLICY_COOKIE_NAME+"=(\\d)(\\d)(\\d)($|;)"),n=document.cookie.match(e);return n?{ads:!!+n[1],personalisation:!!+n[2],performance:!!+n[3],necessary:!0}:a}function C(){var e=new Date;return e.setYear(e.getFullYear()+1),e}function v(e,o,i){var a=C(),r=""+(e.ads?1:0)+(e.personalisation?1:0)+(e.performance?1:0),c=t._getCurrentDomain();t.set(t.POLICY_COOKIE_NAME,r,{domain:c,path:"/",expires:a,crossDomainEnabled:o,sameSite:"None",secure:n},i);var s=new Date(a.getTime());return s.setMonth(s.getMonth()+1),t.set("ckns_policy_exp",a.getTime(),{domain:c,path:"/",expires:s,sameSite:"None",secure:n}),e}function _(e,o,i){var a=C(),r=""+e,c=t._getCurrentDomain();return t.set(t.EXPLICIT_COOKIE_NAME,r,{domain:c,path:"/",expires:a,crossDomainEnabled:o,sameSite:"None",secure:n},i),e}function h(e){return(e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29")}function E(e,t,o){o&&o.domain&&o.domain;var i=e+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return i+=(o=o||{}).path?";path="+o.path:"",i+=o.domain?";domain="+o.domain:"",i+=o.expires?";expires="+o.expires.toUTCString():"",(i+=o.sameSite?";sameSite="+o.sameSite:n?";sameSite=None":"")+(o.secure||n?";secure":"")}t._setPolicy=function(e,n){var o=t.readPolicy();o[e]=!!n,m=null===m?t.setPolicy(o):m.then((function(){return t.setPolicy(o)}))},t.isCookieExplicitSet=function(){return null!==t.get(t.EXPLICIT_COOKIE_NAME)},t.copyExplicitCookiesCrossDomain=function(e){_(t.get(t.EXPLICIT_COOKIE_NAME),!0,e)},t.setCookieExplicitCrossDomain=function(e){_(e,!0)},t.cookiesEnabled=function(){try{document.cookie="cookietest=1; ".concat(n?"sameSite=None; secure;":"");var e=-1!==document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; ".concat(n?"sameSite=None; secure;":""," expires=Thu, 01-Jan-1970 00:00:01 GMT;"),e}catch(e){return!1}},t.delete=function(e,t){f(e=h(e),t)},t.del=t.delete,t._crunch=function(){b("");for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var n=e[t].split("=")[0].trim();this.isAllowed(n)||b(n)}},t._getCurrentDomain=function(){try{return window.location.hostname.toLowerCase().match(/.*(bbc\.co\.uk|bbc\.com)\/*/)[1]}catch(e){return}},t._getPolicy=t.readPolicy,function(e,t){var n=!1,o=!0,i=e.document,a=i.documentElement,r=i.addEventListener,c=r?"addEventListener":"attachEvent",s=r?"removeEventListener":"detachEvent",p=r?"":"on",d=function o(a){"readystatechange"===a.type&&"complete"!=i.readyState||(("load"===a.type?e:i)[s](p+a.type,o,!1),!n&&(n=!0)&&t.call(e,a.type||a))};if("complete"===i.readyState)t.call(e,"lazy");else{if(!r&&a.doScroll){try{o=!e.frameElement}catch(e){}o&&function e(){try{a.doScroll("left")}catch(t){return void setTimeout(e,50)}d("poll")}()}i[c](p+"DOMContentLoaded",d,!1),i[c](p+"readystatechange",d,!1),e[c](p+"load",d,!1)}}(window,(function(){t._crunch()})),window.addEventListener?window.addEventListener("beforeunload",(function(){t._crunch()}),!1):window.attachEvent?window.attachEvent("onbeforeunload",(function(){t._crunch()})):window.onbeforeunload=function(){t._crunch()};var k=t;window.bbccookies=k}();